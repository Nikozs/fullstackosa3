(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n(12),o=n(15),l=n(13),u=n(16),s=n(2),i=n(0),c=n.n(i),m=n(14),d=n.n(m),h=(n(22),function(e){return c.a.createElement("tr",{key:e.person.name},c.a.createElement("td",null,e.person.name),c.a.createElement("td",null," ",e.person.number," "),c.a.createElement("td",null,c.a.createElement("button",{onClick:e.remove},"Poista")))}),f=function(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"Numerot"),c.a.createElement("table",null,c.a.createElement("tbody",null,e.persons.map(function(t){return c.a.createElement(h,{key:t.name,person:t,remove:e.remove.bind(void 0,t.id)})}))))},p=n(3),b=n.n(p),v="https://pure-brook-89023.herokuapp.com/api/persons",E={getAll:function(){return b.a.get(v)},create:function(e){return b.a.post(v,e)},update:function(e,t){return b.a.put("".concat(v,"/").concat(e),t)},del:function(e){return b.a.delete("".concat(v,"/").concat(e))}},g=function(e){var t=e.message;return null===t?null:c.a.createElement("div",{className:"error"},t)},w=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).handlePersonDelete=function(e){var t=function(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return e[a]}(n.state.persons,"id",e);console.log("target",e),window.confirm("poistetaanko "+t.name+" ?")&&(E.del(e).then(n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),error:"Henkil\xf6 '".concat(t.name,"' poistettu")})).catch(function(e){n.setState({error:" Henkil\xf6n '".concat(t.name,"' poistaminen ei onnistunut ")}),setTimeout(function(){n.setState({error:null})},5e3)}),setTimeout(function(){n.setState({error:null})},5e3))},n.addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};(function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e.name)return console.log("Yhteystieto l\xf6ytyi jo"),!0;return console.log("Yhteystieto ei l\xf6ytynyt"),!1})(t,n.state.persons)||(console.log("Yhteystieto lis\xe4tty"),E.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e.data),newName:"",newNumber:"",error:"Yhteystieto "+t.name+" lis\xe4tty"}),setTimeout(function(){n.setState({error:null})},5e3)}).catch(function(e){n.setState({error:" Henkil\xf6n '".concat(t.name,"' lis\xe4\xe4minen ei onnistunut ")}),setTimeout(function(){n.setState({error:null})},5e3)}))},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.state={persons:[],newName:"",newNumber:"",error:null,showAll:!0},n.handlePersonDelete=n.handlePersonDelete.bind(Object(s.a)(Object(s.a)(n))),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t.data})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Puhelinluettelo"),c.a.createElement("ul",null,c.a.createElement(g,{message:this.state.error})),c.a.createElement("form",{onSubmit:this.addPerson},c.a.createElement("div",null,"nimi: ",c.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),c.a.createElement("div",null,"numero: ",c.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))),c.a.createElement(f,{persons:this.state.persons,remove:this.handlePersonDelete}))}}]),t}(c.a.Component);t.default=w;d.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.22fa7e44.chunk.js.map